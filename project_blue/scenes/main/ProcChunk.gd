tool
extends Node

export (NodePath) var mesh_path
export(Array, float, -1, 1) var corners = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0] setget run_corners
export var random: bool setget run_random
export var interpolate: bool = true setget run_interpolate
export var trans: Vector3 = Vector3.ZERO setget run_trans
export var spawn: bool setget run_spawn
export var delete: bool setget run_delete

#global vars
var rng = RandomNumberGenerator.new()
var ball = preload("res://scenes/ball/Ball.tscn")

func _ready():
	rng.randomize()

#setters
func run_corners(c):
	corners = c
	get_color()
	get_mesh()
	
func run_random(r):
	var c = [
		rng.randf_range(-1, 1)
	,	rng.randf_range(-1, 1)
	,	rng.randf_range(-1, 1)
	,	rng.randf_range(-1, 1)
	,	rng.randf_range(-1, 1)
	,	rng.randf_range(-1, 1)
	,	rng.randf_range(-1, 1)
	,	rng.randf_range(-1, 1)
	]
	run_corners(c)

func run_interpolate(i):
	interpolate = i
	get_mesh()
	
func run_trans(t):
	trans = t
	position_balls()
	get_mesh()

#command setters
func run_spawn(k):
	if get_child_count() == 0:
		for i in range(0, 8):
			add_child(ball.instance())
		position_balls()
	get_color()
	get_mesh()

func run_delete(k):
	while get_child_count() > 0:
		var child = get_child(0)
		remove_child(child)
		child.queue_free()
	if !mesh_path.is_empty():
		var mesh_instance : MeshInstance = get_node(mesh_path)
		mesh_instance.mesh = null

#heavy lifting functions
func position_balls():
	for i in range(0, 8):
			add_child(ball.instance())
			var child: Sprite3D = get_child(i)
			var coords = index_to_coords(i)
			child.transform.origin = Vector3(coords[0], coords[1], coords[2]) + trans

func get_color():
	for i in get_child_count():
		var child = get_child(i)
		child.modulate = Color.from_hsv((corners[i]+1)/4, 1, 1)

func get_mesh():
	if !mesh_path.is_empty() and !get_child_count() < 8:
		var mesh_instance : MeshInstance = get_node(mesh_path) #get mesh_instance
		
		#create mesh
		var mesh: ArrayMesh = ArrayMesh.new()
		var case_index = corners_to_index(corners)
		if case_index > 0 and case_index < 255:
			var cell_data = regularCellData[regularCellClass[case_index]]
			var vertex_data = regularVertexData[case_index]
			var arrays = get_mesh_data(cell_data, vertex_data)
			mesh.add_surface_from_arrays(Mesh.PRIMITIVE_TRIANGLES, arrays)
			mesh_instance.mesh = mesh
		else:
			mesh_instance.mesh = null

func get_mesh_data(cell_data: Array, vertex_data: Array) -> Array:
	var vertices = PoolVector3Array() 
	var normals = PoolVector3Array()
	
	var vertex_positions: Array
	for i in range(0, vertex_data.size()):
		var lower_corner: int = get_hex_digit(vertex_data[i], 2)
		var higher_corner: int = get_hex_digit(vertex_data[i], 3)
		var weight: float = interp(0, 1, corners[lower_corner], corners[higher_corner], 0) if interpolate else 0.5
		var pos: Vector3 = (get_child(lower_corner).transform.origin).linear_interpolate(get_child(higher_corner).transform.origin, weight)
		vertex_positions.append(pos)
	
	var num_triangles = get_hex_digit(cell_data[0], 1)
	var triangle_indices = cell_data[1]
	for i in range(0, num_triangles):
		var v0 = vertex_positions[triangle_indices[3*i]]
		var v1 = vertex_positions[triangle_indices[3*i + 1]]
		var v2 = vertex_positions[triangle_indices[3*i + 2]]
		var normal = get_normal(v0, v1, v2)
		vertices.append(v0)
		vertices.append(v2)
		vertices.append(v1) #clockwise winding order of godot
		normals.append(normal)
		normals.append(normal)
		normals.append(normal)
	
	#commit to mesh
	var arrays = []
	arrays.resize(ArrayMesh.ARRAY_MAX)
	arrays[ArrayMesh.ARRAY_VERTEX] = vertices
	arrays[ArrayMesh.ARRAY_NORMAL] = normals
	return arrays

#utility functions

#c and d are end points of original range (i.e. corner values [-1, 1])
#a and b are end points of new range (i.e. local-space co-ordinates across relevant axis [0, 1])
#x is the target value of the original range (i.e. 0)
#returns target value of the new range (i.e. coordinate across that edge)
func interp(a: float, b: float, c: float, d: float, x: float) -> float:
	return a + (b-a)*abs(x-c)/abs(d-c)

func get_normal(a: Vector3, b: Vector3, c: Vector3, flip: bool = false) -> Vector3:
	var normal = (b - a).cross(c - a)
	return -normal if flip else normal

func index_to_coords(i: int) -> Array:
	return [i%2, (i/2)%2, i/4]

func get_hex_digit(hex: int, index: int) -> int:
	return int(("%x" % [hex])[index])

func corners_to_index(corners: Array) -> int:
	return(   s(corners[0]) * 1
			+ s(corners[1]) * 2
			+ s(corners[2]) * 4
			+ s(corners[3]) * 8
			+ s(corners[4]) * 16
			+ s(corners[5]) * 32
			+ s(corners[6]) * 64
			+ s(corners[7]) * 128
		  ) 

func s(n: float) -> int:
	return 1 if n < 0 else 0

######################### lookup tables
const regularCellClass: Array = [
	0x00, 0x01, 0x01, 0x03, 0x01, 0x03, 0x02, 0x04, 0x01, 0x02, 0x03, 0x04, 0x03, 0x04, 0x04, 0x03,
	0x01, 0x03, 0x02, 0x04, 0x02, 0x04, 0x06, 0x0C, 0x02, 0x05, 0x05, 0x0B, 0x05, 0x0A, 0x07, 0x04,
	0x01, 0x02, 0x03, 0x04, 0x02, 0x05, 0x05, 0x0A, 0x02, 0x06, 0x04, 0x0C, 0x05, 0x07, 0x0B, 0x04,
	0x03, 0x04, 0x04, 0x03, 0x05, 0x0B, 0x07, 0x04, 0x05, 0x07, 0x0A, 0x04, 0x08, 0x0E, 0x0E, 0x03,
	0x01, 0x02, 0x02, 0x05, 0x03, 0x04, 0x05, 0x0B, 0x02, 0x06, 0x05, 0x07, 0x04, 0x0C, 0x0A, 0x04,
	0x03, 0x04, 0x05, 0x0A, 0x04, 0x03, 0x07, 0x04, 0x05, 0x07, 0x08, 0x0E, 0x0B, 0x04, 0x0E, 0x03,
	0x02, 0x06, 0x05, 0x07, 0x05, 0x07, 0x08, 0x0E, 0x06, 0x09, 0x07, 0x0F, 0x07, 0x0F, 0x0E, 0x0D,
	0x04, 0x0C, 0x0B, 0x04, 0x0A, 0x04, 0x0E, 0x03, 0x07, 0x0F, 0x0E, 0x0D, 0x0E, 0x0D, 0x02, 0x01,
	0x01, 0x02, 0x02, 0x05, 0x02, 0x05, 0x06, 0x07, 0x03, 0x05, 0x04, 0x0A, 0x04, 0x0B, 0x0C, 0x04,
	0x02, 0x05, 0x06, 0x07, 0x06, 0x07, 0x09, 0x0F, 0x05, 0x08, 0x07, 0x0E, 0x07, 0x0E, 0x0F, 0x0D,
	0x03, 0x05, 0x04, 0x0B, 0x05, 0x08, 0x07, 0x0E, 0x04, 0x07, 0x03, 0x04, 0x0A, 0x0E, 0x04, 0x03,
	0x04, 0x0A, 0x0C, 0x04, 0x07, 0x0E, 0x0F, 0x0D, 0x0B, 0x0E, 0x04, 0x03, 0x0E, 0x02, 0x0D, 0x01,
	0x03, 0x05, 0x05, 0x08, 0x04, 0x0A, 0x07, 0x0E, 0x04, 0x07, 0x0B, 0x0E, 0x03, 0x04, 0x04, 0x03,
	0x04, 0x0B, 0x07, 0x0E, 0x0C, 0x04, 0x0F, 0x0D, 0x0A, 0x0E, 0x0E, 0x02, 0x04, 0x03, 0x0D, 0x01,
	0x04, 0x07, 0x0A, 0x0E, 0x0B, 0x0E, 0x0E, 0x02, 0x0C, 0x0F, 0x04, 0x0D, 0x04, 0x0D, 0x03, 0x01,
	0x03, 0x04, 0x04, 0x03, 0x04, 0x03, 0x0D, 0x01, 0x04, 0x0D, 0x03, 0x01, 0x03, 0x01, 0x01, 0x00
]

#Each of these elements represents a specific triangle and vertex configuration
#[0xC4, [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]]
#C = 12 distinct vertices used
#4 = 4 distinct triangles created
#[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11] = 
#First triangle = vertices 0, 1, 2
#Second triangle = vertices 3, 4, 5
#Third triangle = vertices 6, 7, 8
#Fourth tirangle = vertices 9, 10, 11
const regularCellData: Array = [
	[0x00, []],
	[0x31, [0, 1, 2]],
	[0x62, [0, 1, 2, 3, 4, 5]],
	[0x42, [0, 1, 2, 0, 2, 3]],
	[0x53, [0, 1, 4, 1, 3, 4, 1, 2, 3]],
	[0x73, [0, 1, 2, 0, 2, 3, 4, 5, 6]],
	[0x93, [0, 1, 2, 3, 4, 5, 6, 7, 8]],
	[0x84, [0, 1, 4, 1, 3, 4, 1, 2, 3, 5, 6, 7]],
	[0x84, [0, 1, 2, 0, 2, 3, 4, 5, 6, 4, 6, 7]],
	[0xC4, [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]],
	[0x64, [0, 4, 5, 0, 1, 4, 1, 3, 4, 1, 2, 3]],
	[0x64, [0, 5, 4, 0, 4, 1, 1, 4, 3, 1, 3, 2]],
	[0x64, [0, 4, 5, 0, 3, 4, 0, 1, 3, 1, 2, 3]],
	[0x64, [0, 1, 2, 0, 2, 3, 0, 3, 4, 0, 4, 5]],
	[0x75, [0, 1, 2, 0, 2, 3, 0, 3, 4, 0, 4, 5, 0, 5, 6]],
	[0x95, [0, 4, 5, 0, 3, 4, 0, 1, 3, 1, 2, 3, 6, 7, 8]]
]

#Each of these represents the index-referencable vertices from one of the configurations above
#[0x1146, 0x2245, 0x6201, 0x4223, 0x1326]
#0x1146 = first referencable vertex in configuration
#11 = "vertex re-use data" (unimportant for us)
#01 = "vertex lies on edge between corners 0 (lowest) and 1 (highest)
const regularVertexData: Array = [
	[],
	[0x6201, 0x5102, 0x3304],
	[0x6201, 0x2315, 0x4113],
	[0x5102, 0x3304, 0x2315, 0x4113],
	[0x5102, 0x4223, 0x1326],
	[0x3304, 0x6201, 0x4223, 0x1326],
	[0x6201, 0x2315, 0x4113, 0x5102, 0x4223, 0x1326],
	[0x4223, 0x1326, 0x3304, 0x2315, 0x4113],
	[0x4113, 0x8337, 0x4223],
	[0x6201, 0x5102, 0x3304, 0x4223, 0x4113, 0x8337],
	[0x6201, 0x2315, 0x8337, 0x4223],
	[0x5102, 0x3304, 0x2315, 0x8337, 0x4223],
	[0x5102, 0x4113, 0x8337, 0x1326],
	[0x4113, 0x8337, 0x1326, 0x3304, 0x6201],
	[0x6201, 0x2315, 0x8337, 0x1326, 0x5102],
	[0x3304, 0x2315, 0x8337, 0x1326],
	[0x3304, 0x1146, 0x2245],
	[0x6201, 0x5102, 0x1146, 0x2245],
	[0x6201, 0x2315, 0x4113, 0x3304, 0x1146, 0x2245],
	[0x2315, 0x4113, 0x5102, 0x1146, 0x2245],
	[0x5102, 0x4223, 0x1326, 0x3304, 0x1146, 0x2245],
	[0x1146, 0x2245, 0x6201, 0x4223, 0x1326],
	[0x3304, 0x1146, 0x2245, 0x6201, 0x2315, 0x4113, 0x5102, 0x4223, 0x1326],
	[0x4223, 0x1326, 0x1146, 0x2245, 0x2315, 0x4113],
	[0x4223, 0x4113, 0x8337, 0x3304, 0x1146, 0x2245],
	[0x6201, 0x5102, 0x1146, 0x2245, 0x4223, 0x4113, 0x8337],
	[0x4223, 0x6201, 0x2315, 0x8337, 0x3304, 0x1146, 0x2245],
	[0x4223, 0x8337, 0x2315, 0x2245, 0x1146, 0x5102],
	[0x5102, 0x4113, 0x8337, 0x1326, 0x3304, 0x1146, 0x2245],
	[0x4113, 0x8337, 0x1326, 0x1146, 0x2245, 0x6201],
	[0x6201, 0x2315, 0x8337, 0x1326, 0x5102, 0x3304, 0x1146, 0x2245],
	[0x2245, 0x2315, 0x8337, 0x1326, 0x1146],
	[0x2315, 0x2245, 0x8157],
	[0x6201, 0x5102, 0x3304, 0x2315, 0x2245, 0x8157],
	[0x4113, 0x6201, 0x2245, 0x8157],
	[0x2245, 0x8157, 0x4113, 0x5102, 0x3304],
	[0x5102, 0x4223, 0x1326, 0x2315, 0x2245, 0x8157],
	[0x6201, 0x4223, 0x1326, 0x3304, 0x2315, 0x2245, 0x8157],
	[0x6201, 0x2245, 0x8157, 0x4113, 0x5102, 0x4223, 0x1326],
	[0x4223, 0x1326, 0x3304, 0x2245, 0x8157, 0x4113],
	[0x4223, 0x4113, 0x8337, 0x2315, 0x2245, 0x8157],
	[0x6201, 0x5102, 0x3304, 0x4223, 0x4113, 0x8337, 0x2315, 0x2245, 0x8157],
	[0x8337, 0x4223, 0x6201, 0x2245, 0x8157],
	[0x5102, 0x3304, 0x2245, 0x8157, 0x8337, 0x4223],
	[0x5102, 0x4113, 0x8337, 0x1326, 0x2315, 0x2245, 0x8157],
	[0x4113, 0x8337, 0x1326, 0x3304, 0x6201, 0x2315, 0x2245, 0x8157],
	[0x5102, 0x1326, 0x8337, 0x8157, 0x2245, 0x6201],
	[0x8157, 0x8337, 0x1326, 0x3304, 0x2245],
	[0x2315, 0x3304, 0x1146, 0x8157],
	[0x6201, 0x5102, 0x1146, 0x8157, 0x2315],
	[0x3304, 0x1146, 0x8157, 0x4113, 0x6201],
	[0x4113, 0x5102, 0x1146, 0x8157],
	[0x2315, 0x3304, 0x1146, 0x8157, 0x5102, 0x4223, 0x1326],
	[0x1326, 0x4223, 0x6201, 0x2315, 0x8157, 0x1146],
	[0x3304, 0x1146, 0x8157, 0x4113, 0x6201, 0x5102, 0x4223, 0x1326],
	[0x1326, 0x1146, 0x8157, 0x4113, 0x4223],
	[0x2315, 0x3304, 0x1146, 0x8157, 0x4223, 0x4113, 0x8337],
	[0x6201, 0x5102, 0x1146, 0x8157, 0x2315, 0x4223, 0x4113, 0x8337],
	[0x3304, 0x1146, 0x8157, 0x8337, 0x4223, 0x6201],
	[0x4223, 0x5102, 0x1146, 0x8157, 0x8337],
	[0x2315, 0x3304, 0x1146, 0x8157, 0x5102, 0x4113, 0x8337, 0x1326],
	[0x6201, 0x4113, 0x8337, 0x1326, 0x1146, 0x8157, 0x2315],
	[0x6201, 0x3304, 0x1146, 0x8157, 0x8337, 0x1326, 0x5102],
	[0x1326, 0x1146, 0x8157, 0x8337],
	[0x1326, 0x8267, 0x1146],
	[0x6201, 0x5102, 0x3304, 0x1326, 0x8267, 0x1146],
	[0x6201, 0x2315, 0x4113, 0x1326, 0x8267, 0x1146],
	[0x5102, 0x3304, 0x2315, 0x4113, 0x1326, 0x8267, 0x1146],
	[0x5102, 0x4223, 0x8267, 0x1146],
	[0x3304, 0x6201, 0x4223, 0x8267, 0x1146],
	[0x5102, 0x4223, 0x8267, 0x1146, 0x6201, 0x2315, 0x4113],
	[0x1146, 0x8267, 0x4223, 0x4113, 0x2315, 0x3304],
	[0x4113, 0x8337, 0x4223, 0x1326, 0x8267, 0x1146],
	[0x6201, 0x5102, 0x3304, 0x4223, 0x4113, 0x8337, 0x1326, 0x8267, 0x1146],
	[0x6201, 0x2315, 0x8337, 0x4223, 0x1326, 0x8267, 0x1146],
	[0x5102, 0x3304, 0x2315, 0x8337, 0x4223, 0x1326, 0x8267, 0x1146],
	[0x8267, 0x1146, 0x5102, 0x4113, 0x8337],
	[0x6201, 0x4113, 0x8337, 0x8267, 0x1146, 0x3304],
	[0x6201, 0x2315, 0x8337, 0x8267, 0x1146, 0x5102],
	[0x1146, 0x3304, 0x2315, 0x8337, 0x8267],
	[0x3304, 0x1326, 0x8267, 0x2245],
	[0x1326, 0x8267, 0x2245, 0x6201, 0x5102],
	[0x3304, 0x1326, 0x8267, 0x2245, 0x6201, 0x2315, 0x4113],
	[0x1326, 0x8267, 0x2245, 0x2315, 0x4113, 0x5102],
	[0x5102, 0x4223, 0x8267, 0x2245, 0x3304],
	[0x6201, 0x4223, 0x8267, 0x2245],
	[0x5102, 0x4223, 0x8267, 0x2245, 0x3304, 0x6201, 0x2315, 0x4113],
	[0x4113, 0x4223, 0x8267, 0x2245, 0x2315],
	[0x3304, 0x1326, 0x8267, 0x2245, 0x4223, 0x4113, 0x8337],
	[0x1326, 0x8267, 0x2245, 0x6201, 0x5102, 0x4223, 0x4113, 0x8337],
	[0x3304, 0x1326, 0x8267, 0x2245, 0x4223, 0x6201, 0x2315, 0x8337],
	[0x5102, 0x1326, 0x8267, 0x2245, 0x2315, 0x8337, 0x4223],
	[0x3304, 0x2245, 0x8267, 0x8337, 0x4113, 0x5102],
	[0x8337, 0x8267, 0x2245, 0x6201, 0x4113],
	[0x5102, 0x6201, 0x2315, 0x8337, 0x8267, 0x2245, 0x3304],
	[0x2315, 0x8337, 0x8267, 0x2245],
	[0x2315, 0x2245, 0x8157, 0x1326, 0x8267, 0x1146],
	[0x6201, 0x5102, 0x3304, 0x2315, 0x2245, 0x8157, 0x1326, 0x8267, 0x1146],
	[0x6201, 0x2245, 0x8157, 0x4113, 0x1326, 0x8267, 0x1146],
	[0x2245, 0x8157, 0x4113, 0x5102, 0x3304, 0x1326, 0x8267, 0x1146],
	[0x4223, 0x8267, 0x1146, 0x5102, 0x2315, 0x2245, 0x8157],
	[0x3304, 0x6201, 0x4223, 0x8267, 0x1146, 0x2315, 0x2245, 0x8157],
	[0x4223, 0x8267, 0x1146, 0x5102, 0x6201, 0x2245, 0x8157, 0x4113],
	[0x3304, 0x2245, 0x8157, 0x4113, 0x4223, 0x8267, 0x1146],
	[0x4223, 0x4113, 0x8337, 0x2315, 0x2245, 0x8157, 0x1326, 0x8267, 0x1146],
	[0x6201, 0x5102, 0x3304, 0x4223, 0x4113, 0x8337, 0x2315, 0x2245, 0x8157, 0x1326, 0x8267, 0x1146],
	[0x8337, 0x4223, 0x6201, 0x2245, 0x8157, 0x1326, 0x8267, 0x1146],
	[0x4223, 0x5102, 0x3304, 0x2245, 0x8157, 0x8337, 0x1326, 0x8267, 0x1146],
	[0x8267, 0x1146, 0x5102, 0x4113, 0x8337, 0x2315, 0x2245, 0x8157],
	[0x6201, 0x4113, 0x8337, 0x8267, 0x1146, 0x3304, 0x2315, 0x2245, 0x8157],
	[0x8337, 0x8267, 0x1146, 0x5102, 0x6201, 0x2245, 0x8157],
	[0x3304, 0x2245, 0x8157, 0x8337, 0x8267, 0x1146],
	[0x8157, 0x2315, 0x3304, 0x1326, 0x8267],
	[0x8267, 0x8157, 0x2315, 0x6201, 0x5102, 0x1326],
	[0x8267, 0x1326, 0x3304, 0x6201, 0x4113, 0x8157],
	[0x8267, 0x8157, 0x4113, 0x5102, 0x1326],
	[0x5102, 0x4223, 0x8267, 0x8157, 0x2315, 0x3304],
	[0x2315, 0x6201, 0x4223, 0x8267, 0x8157],
	[0x3304, 0x5102, 0x4223, 0x8267, 0x8157, 0x4113, 0x6201],
	[0x4113, 0x4223, 0x8267, 0x8157],
	[0x8157, 0x2315, 0x3304, 0x1326, 0x8267, 0x4223, 0x4113, 0x8337],
	[0x8157, 0x2315, 0x6201, 0x5102, 0x1326, 0x8267, 0x4223, 0x4113, 0x8337],
	[0x8157, 0x8337, 0x4223, 0x6201, 0x3304, 0x1326, 0x8267],
	[0x5102, 0x1326, 0x8267, 0x8157, 0x8337, 0x4223],
	[0x8267, 0x8157, 0x2315, 0x3304, 0x5102, 0x4113, 0x8337],
	[0x6201, 0x4113, 0x8337, 0x8267, 0x8157, 0x2315],
	[0x6201, 0x3304, 0x5102, 0x8337, 0x8267, 0x8157],
	[0x8337, 0x8267, 0x8157],
	[0x8337, 0x8157, 0x8267],
	[0x6201, 0x5102, 0x3304, 0x8337, 0x8157, 0x8267],
	[0x6201, 0x2315, 0x4113, 0x8337, 0x8157, 0x8267],
	[0x5102, 0x3304, 0x2315, 0x4113, 0x8337, 0x8157, 0x8267],
	[0x5102, 0x4223, 0x1326, 0x8337, 0x8157, 0x8267],
	[0x6201, 0x4223, 0x1326, 0x3304, 0x8337, 0x8157, 0x8267],
	[0x6201, 0x2315, 0x4113, 0x5102, 0x4223, 0x1326, 0x8337, 0x8157, 0x8267],
	[0x4223, 0x1326, 0x3304, 0x2315, 0x4113, 0x8337, 0x8157, 0x8267],
	[0x4113, 0x8157, 0x8267, 0x4223],
	[0x4223, 0x4113, 0x8157, 0x8267, 0x6201, 0x5102, 0x3304],
	[0x8157, 0x8267, 0x4223, 0x6201, 0x2315],
	[0x3304, 0x2315, 0x8157, 0x8267, 0x4223, 0x5102],
	[0x1326, 0x5102, 0x4113, 0x8157, 0x8267],
	[0x8157, 0x4113, 0x6201, 0x3304, 0x1326, 0x8267],
	[0x1326, 0x5102, 0x6201, 0x2315, 0x8157, 0x8267],
	[0x8267, 0x1326, 0x3304, 0x2315, 0x8157],
	[0x3304, 0x1146, 0x2245, 0x8337, 0x8157, 0x8267],
	[0x6201, 0x5102, 0x1146, 0x2245, 0x8337, 0x8157, 0x8267],
	[0x6201, 0x2315, 0x4113, 0x3304, 0x1146, 0x2245, 0x8337, 0x8157, 0x8267],
	[0x2315, 0x4113, 0x5102, 0x1146, 0x2245, 0x8337, 0x8157, 0x8267],
	[0x5102, 0x4223, 0x1326, 0x3304, 0x1146, 0x2245, 0x8337, 0x8157, 0x8267],
	[0x1146, 0x2245, 0x6201, 0x4223, 0x1326, 0x8337, 0x8157, 0x8267],
	[0x6201, 0x2315, 0x4113, 0x5102, 0x4223, 0x1326, 0x3304, 0x1146, 0x2245, 0x8337, 0x8157, 0x8267],
	[0x4113, 0x4223, 0x1326, 0x1146, 0x2245, 0x2315, 0x8337, 0x8157, 0x8267],
	[0x4223, 0x4113, 0x8157, 0x8267, 0x3304, 0x1146, 0x2245],
	[0x6201, 0x5102, 0x1146, 0x2245, 0x4223, 0x4113, 0x8157, 0x8267],
	[0x8157, 0x8267, 0x4223, 0x6201, 0x2315, 0x3304, 0x1146, 0x2245],
	[0x2315, 0x8157, 0x8267, 0x4223, 0x5102, 0x1146, 0x2245],
	[0x1326, 0x5102, 0x4113, 0x8157, 0x8267, 0x3304, 0x1146, 0x2245],
	[0x1326, 0x1146, 0x2245, 0x6201, 0x4113, 0x8157, 0x8267],
	[0x5102, 0x6201, 0x2315, 0x8157, 0x8267, 0x1326, 0x3304, 0x1146, 0x2245],
	[0x1326, 0x1146, 0x2245, 0x2315, 0x8157, 0x8267],
	[0x2315, 0x2245, 0x8267, 0x8337],
	[0x2315, 0x2245, 0x8267, 0x8337, 0x6201, 0x5102, 0x3304],
	[0x4113, 0x6201, 0x2245, 0x8267, 0x8337],
	[0x5102, 0x4113, 0x8337, 0x8267, 0x2245, 0x3304],
	[0x2315, 0x2245, 0x8267, 0x8337, 0x5102, 0x4223, 0x1326],
	[0x6201, 0x4223, 0x1326, 0x3304, 0x8337, 0x2315, 0x2245, 0x8267],
	[0x4113, 0x6201, 0x2245, 0x8267, 0x8337, 0x5102, 0x4223, 0x1326],
	[0x4113, 0x4223, 0x1326, 0x3304, 0x2245, 0x8267, 0x8337],
	[0x2315, 0x2245, 0x8267, 0x4223, 0x4113],
	[0x2315, 0x2245, 0x8267, 0x4223, 0x4113, 0x6201, 0x5102, 0x3304],
	[0x6201, 0x2245, 0x8267, 0x4223],
	[0x3304, 0x2245, 0x8267, 0x4223, 0x5102],
	[0x5102, 0x4113, 0x2315, 0x2245, 0x8267, 0x1326],
	[0x4113, 0x2315, 0x2245, 0x8267, 0x1326, 0x3304, 0x6201],
	[0x5102, 0x6201, 0x2245, 0x8267, 0x1326],
	[0x3304, 0x2245, 0x8267, 0x1326],
	[0x8267, 0x8337, 0x2315, 0x3304, 0x1146],
	[0x5102, 0x1146, 0x8267, 0x8337, 0x2315, 0x6201],
	[0x3304, 0x1146, 0x8267, 0x8337, 0x4113, 0x6201],
	[0x8337, 0x4113, 0x5102, 0x1146, 0x8267],
	[0x8267, 0x8337, 0x2315, 0x3304, 0x1146, 0x5102, 0x4223, 0x1326],
	[0x1146, 0x8267, 0x8337, 0x2315, 0x6201, 0x4223, 0x1326],
	[0x8267, 0x8337, 0x4113, 0x6201, 0x3304, 0x1146, 0x5102, 0x4223, 0x1326],
	[0x4113, 0x4223, 0x1326, 0x1146, 0x8267, 0x8337],
	[0x3304, 0x2315, 0x4113, 0x4223, 0x8267, 0x1146],
	[0x2315, 0x6201, 0x5102, 0x1146, 0x8267, 0x4223, 0x4113],
	[0x1146, 0x8267, 0x4223, 0x6201, 0x3304],
	[0x5102, 0x1146, 0x8267, 0x4223],
	[0x8267, 0x1326, 0x5102, 0x4113, 0x2315, 0x3304, 0x1146],
	[0x6201, 0x4113, 0x2315, 0x1326, 0x1146, 0x8267],
	[0x6201, 0x3304, 0x1146, 0x8267, 0x1326, 0x5102],
	[0x1326, 0x1146, 0x8267],
	[0x1326, 0x8337, 0x8157, 0x1146],
	[0x8337, 0x8157, 0x1146, 0x1326, 0x6201, 0x5102, 0x3304],
	[0x8337, 0x8157, 0x1146, 0x1326, 0x6201, 0x2315, 0x4113],
	[0x4113, 0x5102, 0x3304, 0x2315, 0x1326, 0x8337, 0x8157, 0x1146],
	[0x8337, 0x8157, 0x1146, 0x5102, 0x4223],
	[0x6201, 0x4223, 0x8337, 0x8157, 0x1146, 0x3304],
	[0x8337, 0x8157, 0x1146, 0x5102, 0x4223, 0x6201, 0x2315, 0x4113],
	[0x4223, 0x8337, 0x8157, 0x1146, 0x3304, 0x2315, 0x4113],
	[0x4223, 0x4113, 0x8157, 0x1146, 0x1326],
	[0x4223, 0x4113, 0x8157, 0x1146, 0x1326, 0x6201, 0x5102, 0x3304],
	[0x1146, 0x8157, 0x2315, 0x6201, 0x4223, 0x1326],
	[0x4223, 0x5102, 0x3304, 0x2315, 0x8157, 0x1146, 0x1326],
	[0x4113, 0x8157, 0x1146, 0x5102],
	[0x6201, 0x4113, 0x8157, 0x1146, 0x3304],
	[0x2315, 0x8157, 0x1146, 0x5102, 0x6201],
	[0x2315, 0x8157, 0x1146, 0x3304],
	[0x2245, 0x3304, 0x1326, 0x8337, 0x8157],
	[0x6201, 0x2245, 0x8157, 0x8337, 0x1326, 0x5102],
	[0x2245, 0x3304, 0x1326, 0x8337, 0x8157, 0x6201, 0x2315, 0x4113],
	[0x2245, 0x2315, 0x4113, 0x5102, 0x1326, 0x8337, 0x8157],
	[0x4223, 0x8337, 0x8157, 0x2245, 0x3304, 0x5102],
	[0x8157, 0x2245, 0x6201, 0x4223, 0x8337],
	[0x2245, 0x3304, 0x5102, 0x4223, 0x8337, 0x8157, 0x4113, 0x6201, 0x2315],
	[0x4223, 0x8337, 0x8157, 0x2245, 0x2315, 0x4113],
	[0x4113, 0x8157, 0x2245, 0x3304, 0x1326, 0x4223],
	[0x1326, 0x4223, 0x4113, 0x8157, 0x2245, 0x6201, 0x5102],
	[0x8157, 0x2245, 0x3304, 0x1326, 0x4223, 0x6201, 0x2315],
	[0x5102, 0x1326, 0x4223, 0x2315, 0x8157, 0x2245],
	[0x3304, 0x5102, 0x4113, 0x8157, 0x2245],
	[0x4113, 0x8157, 0x2245, 0x6201],
	[0x5102, 0x6201, 0x2315, 0x8157, 0x2245, 0x3304],
	[0x2315, 0x8157, 0x2245],
	[0x1146, 0x1326, 0x8337, 0x2315, 0x2245],
	[0x1146, 0x1326, 0x8337, 0x2315, 0x2245, 0x6201, 0x5102, 0x3304],
	[0x6201, 0x2245, 0x1146, 0x1326, 0x8337, 0x4113],
	[0x2245, 0x1146, 0x1326, 0x8337, 0x4113, 0x5102, 0x3304],
	[0x5102, 0x1146, 0x2245, 0x2315, 0x8337, 0x4223],
	[0x1146, 0x3304, 0x6201, 0x4223, 0x8337, 0x2315, 0x2245],
	[0x8337, 0x4113, 0x6201, 0x2245, 0x1146, 0x5102, 0x4223],
	[0x4223, 0x8337, 0x4113, 0x3304, 0x2245, 0x1146],
	[0x4113, 0x2315, 0x2245, 0x1146, 0x1326, 0x4223],
	[0x1146, 0x1326, 0x4223, 0x4113, 0x2315, 0x2245, 0x6201, 0x5102, 0x3304],
	[0x1326, 0x4223, 0x6201, 0x2245, 0x1146],
	[0x4223, 0x5102, 0x3304, 0x2245, 0x1146, 0x1326],
	[0x2245, 0x1146, 0x5102, 0x4113, 0x2315],
	[0x4113, 0x2315, 0x2245, 0x1146, 0x3304, 0x6201],
	[0x6201, 0x2245, 0x1146, 0x5102],
	[0x3304, 0x2245, 0x1146],
	[0x3304, 0x1326, 0x8337, 0x2315],
	[0x5102, 0x1326, 0x8337, 0x2315, 0x6201],
	[0x6201, 0x3304, 0x1326, 0x8337, 0x4113],
	[0x5102, 0x1326, 0x8337, 0x4113],
	[0x4223, 0x8337, 0x2315, 0x3304, 0x5102],
	[0x6201, 0x4223, 0x8337, 0x2315],
	[0x3304, 0x5102, 0x4223, 0x8337, 0x4113, 0x6201],
	[0x4113, 0x4223, 0x8337],
	[0x4113, 0x2315, 0x3304, 0x1326, 0x4223],
	[0x1326, 0x4223, 0x4113, 0x2315, 0x6201, 0x5102],
	[0x3304, 0x1326, 0x4223, 0x6201],
	[0x5102, 0x1326, 0x4223],
	[0x5102, 0x4113, 0x2315, 0x3304],
	[0x6201, 0x4113, 0x2315],
	[0x6201, 0x3304, 0x5102],
	[]
]
